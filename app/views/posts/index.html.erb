<div id="posts">
  <h1> Posts </h1>
  <%= link_to "New Post", new_post_path, class: "button" %>
  Sort By:
  <%= link_to 'Newest', :sort => "created_at", :search => params[:search] %>
  |
  <%= link_to 'Most Popular', :sort => "popularity", :search => params[:search] %>
  |
  <%= link_to 'A-Z', :sort => "name", :search => params[:search] %>
  |
  <%= link_to 'Z-A', :sort => "name_reverse", :search => params[:search] %>
  |
  <%= link_to 'Recently Updated', :sort => "updated_at", :search => params[:search] %>
<br>
<br>
  <%= form_tag post_index_path, :method => 'get' do %>
    <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "Search for Title, Content, or Author" %>
    <%= submit_tag "Search", :name => nil, class: "btn btn-success" %>
    <%= link_to 'Clear Search', post_index_path, class: "button" %>
  <% end %>

  <% @posts.each do |post| %>
    <div class="post">
      <div style="display: inline-block;">
        <span style="border-radius:5px; background:green; color:white; display: block; width:40px; text-align: center;">
        <%= link_to like_post_path(post), method: :put do %>
        <%= image_tag('upvote.png', draggable:"false", id:"drag1") %></span>
        <% end %>
        <span style="border-radius: 5px; display: inline-block; width:40px; background: lightgray; text-align: center;">
          <%= post.cached_votes_score %>
        </span>
        <span style="border-radius:5px; background:red; color:white; display: block; width:40px; text-align: center;">
        <%= link_to dislike_post_path(post), method: :put do %>
        <%= image_tag('downvote.png', draggable:"false", id:"drag1") %></span>
        <% end %>
      </div>
      <div style="display: inline-block;">
      <h2 class="title">
        <%= link_to post.title, post %>
      </h2>
      <p class="date">
        Published
        <%= time_ago_in_words(post.created_at) %>
        ago by
        <%= post.user.email %>
      </p>
      </div>
    </div>



  <% end %>
</div>
